<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="../libs/bootstrap/css/bootstrap.min.css">

    <script src=
      "../libs/jquery/jquery-3.4.1.min.js"
    ></script>

    <script>
      let cred_remove_button = function(index){
          let retval = document.createElement("div");
          retval.id = "cred_list_" + index;
          retval.className="btn btn-primary";
          retval.type="submit";
          retval.innerHTML="Remove";

          return retval;
      }
      jQuery.get("device_credential_list.txt", function(data) {
        document.getElementById("cred_list").innerHTML="";
        let lines = data.split('\n');

        let list = document.getElementById("cred_list");
        list.className="col";

        for(let i = 0;i < lines.length-1;i++){ //iterate to lines.length-1 because split function will include an empty string because of the new line character on the last entry
          let list_item = document.createElement("div");
          list_item.className="row";

          let text = document.createElement("div");
          text.innerHTML=lines[i];
          text.className="col";

          let br = document.createElement("div");
          br.innerHTML="<br>";
          br.className="col";

          list_item.appendChild(text);
          list_item.appendChild(cred_remove_button(i));
          list_item.appendChild(br);

          list.appendChild(list_item);
        }
    });
    </script>

    <title>uDAQC</title>
  </head>

  <body>

    <div class="container-fluid">
      <div class="row">
        <div class="col-md-6 text-left text-break">
            <p>Existing credentials:</p>
            <p><div id="cred_list"></div></p>
        </div>

        <div class="col-md-6">
          <form action="new_device_credentials" method="post">
    				<div class="d-flex flex-row justify-content-center align-items-center">
              <div class="col align-self-center text-right">
                <div class=”card card-block”>
                  User Name
                </div>
              </div>
              <div class="col">
                <input name="login" type="text"></input>
    					</div>
      			</div>
            <div class="d-flex flex-row justify-content-center align-items-center">
              <div class="col align-self-center text-right">
                <div class=”card card-block”>
                  Password
                </div>
              </div>
              <div class="col">
                <input name="password1" type="password"></input>
    					</div>
      			</div>
            <div class="d-flex flex-row justify-content-center align-items-center">
              <div class="col align-self-center text-right">
                <div class=”card card-block”>
                  Repeat Password
                </div>
              </div>
              <div class="col">
                <input name="password2" type="password"></input>
    					</div>
      			</div>
            <div class="d-flex flex-row justify-content-center align-items-center">
              <div class="col align-self-center text-right">
                <div class=”card card-block”>
                  Realm
                </div>
              </div>
              <div class="col">
                <input name="realm" type="text"></input>
    					</div>
      			</div>

            <div class="d-flex flex-row justify-content-around">
              <div class="col-md-auto">
                <button type="submit" class="btn btn-primary">Submit</button>
    					</div>
      			</div>
          </form>
        </div>
      </div>
  	</div>
  </body>
</html>
